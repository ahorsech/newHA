##################  Toilet
title: Туалет, прачечная
icon: mdi:toilet
cards:

############################ Колонка 1 ############################

    - type: vertical-stack
      cards:
      
        - type: markdown
          style: |
              ha-card {
                color: #f8ffd8;
                --paper-item-icon-color: #f8ffd8;
                --paper-item-icon-active-color: #f8ffd8;
                font-weight: bold;
                font-size: 26px;
              }          
          content: >
             **Туалет**
             
        - type: custom:stack-in-card
          mode: vertical
          cards:  
            - type: markdown
              style: |
                   ha-card {
                     color: #f8ffd8;
                     --paper-item-icon-color: #f8ffd8;
                     --paper-item-icon-active-color: #f8ffd8;
                     font-weight: bold;
                     font-size: 14px;
                   } 
              content: >
                 **Освещение**

            - type: custom:mushroom-light-card
              entity: light.tt_ceiling_light
              layout: vertical
              name: Люстра
              use_light_color: true
              show_brightness_control: true
              show_color_temp_control: true
              show_color_control: false
              collapsible_controls: true

            - type: horizontal-stack
              cards:

              - type: custom:mushroom-template-card
                primary: Питание
                secondary: |-
                  {% if is_state("switch.0x00158d00014dceb3_left", "on") %}
                  Вкл
                  {% else %}
                  Выкл
                  {% endif %}
                layout: vertical
                tap_action:
                  action: toggle
                entity: switch.0x00158d00014dceb3_left
                icon: |-
                  {% if is_state("switch.0x00158d00014dceb3_left", "on") %}
                  mdi:power-plug
                  {% else %}
                  mdi:power-plug-off
                  {% endif %}
                multiline_secondary: true
                icon_color: |-
                  {% if is_state("switch.0x00158d00014dceb3_left", "on") %}
                  green
                  {% else %}
                  red
                  {% endif %}

              - type: custom:mushroom-template-card
                primary: Доступность
                secondary: |-
                  {% if is_state("binary_sensor.tt_ceiling_unavailable", "off") %}
                  OK
                  {% else %}
                  Не доступно
                  {% endif %}
                layout: vertical
                entity: binary_sensor.tt_ceiling_unavailable
                icon: |-
                  {% if is_state("binary_sensor.tt_ceiling_unavailable", "off") %}
                  mdi:check-bold
                  {% else %}
                  mdi:alert
                  {% endif %}
                multiline_secondary: true
                icon_color: |-
                  {% if is_state("binary_sensor.tt_ceiling_unavailable", "off") %}
                  green
                  {% else %}
                  red
                  {% endif %}
                tap_action:
                  action: more-info

              - type: custom:mushroom-template-card
                primary: Зеркало
                secondary: |-
                  {% if is_state("light.0xec1bbdfffea37571", "on") %}
                  Вкл
                  {% else %}
                  Выкл
                  {% endif %}
                layout: vertical
                tap_action:
                  action: toggle
                entity: light.0xec1bbdfffea37571
                icon: |-
                  {% if is_state("light.0xec1bbdfffea37571", "on") %}
                  mdi:light-recessed
                  {% else %}
                  mdi:mirror-rectangle
                  {% endif %}
                multiline_secondary: true
                icon_color: |-
                  {% if is_state("light.0xec1bbdfffea37571", "on") %}
                  amber
                  {% else %}
                  grey
                  {% endif %}

              - type: custom:mushroom-template-card
                primary: Вытяжка
                secondary: |-
                  {% if is_state("fan.0x00158d00014dceb3_right", "on") %}
                  Вкл
                  {% else %}
                  Выкл
                  {% endif %}
                layout: vertical
                tap_action:
                  action: toggle
                entity: fan.0x00158d00014dceb3_right
                icon: |-
                  {% if is_state("fan.0x00158d00014dceb3_right", "on") %}
                  mdi:fan
                  {% else %}
                  mdi:fan-off
                  {% endif %}
                multiline_secondary: true
                icon_color: |-
                  {% if is_state("fan.0x00158d00014dceb3_right", "on") %}
                  green
                  {% else %}
                  grey
                  {% endif %}

            - type: horizontal-stack
              cards:

              - type: custom:mushroom-template-card
                primary: Режим
                secondary: |-
                  {% if is_state("binary_sensor.tt_night", "off") %}
                  День
                  {% else %}
                  Ночь
                  {% endif %}
                layout: vertical
                entity: binary_sensor.tt_night
                icon: |-
                  {% if is_state("binary_sensor.tt_night", "off") %}
                  mdi:weather-sunny
                  {% else %}
                  mdi:weather-night
                  {% endif %}
                multiline_secondary: true
                icon_color: |-
                  {% if is_state("binary_sensor.tt_night", "off") %}
                  amber
                  {% else %}
                  white
                  {% endif %} 
                tap_action:
                  action: more-info

              - type: custom:mushroom-template-card
                primary: День выкл
                secondary: |-
                  {% if is_state("binary_sensor.tt_light_day", "off") %}
                  Не обнаружен
                  {% else %}
                  Выкл
                  {% endif %}
                layout: vertical
                entity: binary_sensor.tt_light_day
                icon: |-
                  {% if is_state("binary_sensor.tt_light_day", "off") %}
                  mdi:white-balance-sunny
                  {% else %}
                  mdi:lightbulb-on
                  {% endif %}
                multiline_secondary: true
                icon_color: |-
                  {% if is_state("binary_sensor.tt_light_day", "off") %}
                  grey
                  {% else %}
                  amber
                  {% endif %}             
                tap_action:
                  action: more-info

              - type: custom:mushroom-template-card
                primary: Ночь выкл
                secondary: |-
                  {% if is_state("binary_sensor.tt_light_night", "off") %}
                  Не обнаружен
                  {% else %}
                  Выкл
                  {% endif %}
                layout: vertical
                entity: binary_sensor.tt_light_night
                icon: |-
                  {% if is_state("binary_sensor.tt_light_night", "off") %}
                  mdi:moon-waxing-crescent
                  {% else %}
                  mdi:lightbulb-on
                  {% endif %}
                multiline_secondary: true
                icon_color: |-
                  {% if is_state("binary_sensor.tt_light_night", "off") %}
                  grey
                  {% else %}
                  amber
                  {% endif %} 
                tap_action:
                  action: more-info
                  
        - type: custom:stack-in-card
          mode: vertical
          cards:  
            - type: markdown
              style: |
                   ha-card {
                     color: #f8ffd8;
                     --paper-item-icon-color: #f8ffd8;
                     --paper-item-icon-active-color: #f8ffd8;
                     font-weight: bold;
                     font-size: 14px;
                   } 
              content: >
                 **Датчики и сенсоры**

            - type: horizontal-stack
              cards:

              - type: custom:mushroom-template-card
                primary: Раковина
                secondary: |-
                  {% if is_state("binary_sensor.0x00158d0001bbeba6_water_leak", "off") %}
                  Сухо
                  {% else %}
                  Обнаружена протечка
                  {% endif %}
                layout: vertical
                entity: binary_sensor.0x00158d0001bbeba6_water_leak
                icon: |-
                  {% if is_state("binary_sensor.0x00158d0001bbeba6_water_leak", "off") %}
                  mdi:water-check
                  {% else %}
                  mdi:water-alert
                  {% endif %}
                multiline_secondary: true
                icon_color: |-
                  {% if is_state("binary_sensor.0x00158d0001bbeba6_water_leak", "off") %}
                  green
                  {% else %}
                  red
                  {% endif %} 
                tap_action:
                  action: more-info
                 
              - type: custom:mushroom-template-card
                primary: Движение
                secondary: |-
                  {% if is_state("binary_sensor.0x00158d0001a24e71_occupancy", "off") %}
                  Не обнаружено
                  {% else %}
                  Движение
                  {% endif %}
                layout: vertical
                entity: binary_sensor.0x00158d0001a24e71_occupancy
                icon: |-
                  {% if is_state("binary_sensor.0x00158d0001a24e71_occupancy", "off") %}
                  mdi:motion-sensor-off
                  {% else %}
                  mdi:motion-sensor
                  {% endif %}
                multiline_secondary: true
                icon_color: |-
                  {% if is_state("binary_sensor.0x00158d0001a24e71_occupancy", "off") %}
                  grey
                  {% else %}
                  amber
                  {% endif %} 
                tap_action:
                  action: more-info

              - type: custom:mushroom-template-card
                primary: Температура
                secondary: |-
                      {{states ('sensor.0xec1bbdfffe6f3394_temperature')}} С°
                layout: vertical
                entity: sensor.0xec1bbdfffe6f3394_temperature
                icon_color: |-
                  {% if states("sensor.0xec1bbdfffe6f3394_temperature")|float <= -10 %}
                  indigo
                  {% elif states("sensor.0xec1bbdfffe6f3394_temperature")|float <= 0 %}
                  blue
                  {% elif states("sensor.0xec1bbdfffe6f3394_temperature")|float <= 10 %}
                  light-blue
                  {% elif states("sensor.0xec1bbdfffe6f3394_temperature")|float <= 20 %}
                  cyan
                  {% elif states("sensor.0xec1bbdfffe6f3394_temperature")|float <= 25 %}
                  yellow
                  {% elif states("sensor.0xec1bbdfffe6f3394_temperature")|float <= 30 %}
                  amber
                  {% elif states("sensor.0xec1bbdfffe6f3394_temperature")|float <= 40 %}
                  orange
                  {% endif %}
                icon: mdi:temperature-celsius
                tap_action:
                  action: more-info

              - type: custom:mushroom-template-card
                primary: Влажность
                secondary: |-
                      {{states ('sensor.0xec1bbdfffe6f3394_humidity')}} %
                layout: vertical
                entity: sensor.0xec1bbdfffe6f3394_humidity
                icon_color: |-
                  {% if states("sensor.0xec1bbdfffe6f3394_humidity")|float <= 30 %}
                  deep-orange
                  {% elif states("sensor.0xec1bbdfffe6f3394_humidity")|float <= 40 %}
                  yellow
                  {% elif states("sensor.0xec1bbdfffe6f3394_temperature")|float <= 50 %}
                  light-blue
                  {% elif states("sensor.0xec1bbdfffe6f3394_temperature")|float <= 60 %}
                  blue
                  {% elif states("sensor.0xec1bbdfffe6f3394_temperature")|float > 60 %}
                  indigo
                  {% endif %}
                icon: mdi:water-percent
                tap_action:
                  action: more-info 

############################ Колонка 2 ############################

    - type: vertical-stack
      cards:
      
        - type: markdown
          style: |
              ha-card {
                color: #f8ffd8;
                --paper-item-icon-color: #f8ffd8;
                --paper-item-icon-active-color: #f8ffd8;
                font-weight: bold;
                font-size: 26px;
              }          
          content: >
             **Прачечная**
             
        - type: custom:stack-in-card
          mode: vertical
          cards:  
            - type: markdown
              style: |
                   ha-card {
                     color: #f8ffd8;
                     --paper-item-icon-color: #f8ffd8;
                     --paper-item-icon-active-color: #f8ffd8;
                     font-weight: bold;
                     font-size: 14px;
                   } 
              content: >
                 **Освещение**

            - type: horizontal-stack
              cards:


              - type: custom:mushroom-template-card
                primary: Свет
                secondary: |-
                  {% if is_state("light.0x00158d00014a1a55", "on") %}
                  Вкл
                  {% else %}
                  Выкл
                  {% endif %}
                layout: vertical
                tap_action:
                  action: toggle
                entity: light.0x00158d00014a1a55
                icon: |-
                  {% if is_state("light.0x00158d00014a1a55", "on") %}
                  mdi:track-light
                  {% else %}
                  mdi:track-light-off
                  {% endif %}
                multiline_secondary: true
                icon_color: |-
                  {% if is_state("light.0x00158d00014a1a55", "on") %}
                  amber
                  {% else %}
                  grey
                  {% endif %}

        - type: custom:stack-in-card
          mode: vertical
          cards:

            - type: markdown
              style: |
                   ha-card {
                     color: #f8ffd8;
                     --paper-item-icon-color: #f8ffd8;
                     --paper-item-icon-active-color: #f8ffd8;
                     font-weight: bold;
                     font-size: 14px;
                   } 
              content: >
                 **Розетка, стиральная машина**

            - type: horizontal-stack
              cards:

              - type: custom:mushroom-template-card
                primary: Питание
                secondary: |-
                  {% if is_state("switch.0x842e14fffe51c5ae", "on") %}
                  Вкл
                  {% else %}
                  Выкл
                  {% endif %}
                layout: vertical
                tap_action:
                  action: toggle
                entity: switch.0x842e14fffe51c5ae
                icon: |-
                  {% if is_state("switch.0x842e14fffe51c5ae", "on") %}
                  mdi:power-plug
                  {% else %}
                  mdi:power-plug-off
                  {% endif %}
                multiline_secondary: true
                icon_color: |-
                  {% if is_state("switch.0x842e14fffe51c5ae", "on") %}
                  green
                  {% else %}
                  red
                  {% endif %}
              
              - type: custom:mushroom-template-card
                primary: Мощность
                secondary: |-
                      {{states ('sensor.0x842e14fffe51c5ae_power')}} Ватт
                layout: vertical
                entity: sensor.0x842e14fffe51c5ae_power
                icon_color: light-green
                icon: mdi:lightning-bolt-circle
                tap_action:
                  action: more-info

              - type: custom:mushroom-template-card
                primary: Напряжение
                secondary: |-
                      {{states ('sensor.0x842e14fffe51c5ae_voltage')}} В
                layout: vertical
                entity: sensor.0x842e14fffe51c5ae_voltage
                icon_color: |-
                  {% if states("sensor.0x842e14fffe51c5ae_voltage")|float <= 210 %}
                  red
                  {% elif states("sensor.0x842e14fffe51c5ae_voltage")|float <= 220 %}
                  yellow
                  {% elif states("sensor.0x842e14fffe51c5ae_voltage")|float <= 240 %}
                  green
                  {% elif states("sensor.0x842e14fffe51c5ae_voltage")|float <= 250 %}
                  yellow
                  {% elif states("sensor.0x842e14fffe51c5ae_voltage")|float > 250 %}
                  red
                  {% endif %}
                icon: mdi:sine-wave
                tap_action:
                  action: more-info 

              - type: custom:mushroom-template-card
                primary: Энергия
                secondary: |-
                      {{states ('sensor.0x842e14fffe51c5ae_meter')}} KВт*ч
                layout: vertical
                entity: sensor.0x842e14fffe51c5ae_meter
                icon_color: light-green
                icon: mdi:home-lightning-bolt
                tap_action:
                  action: more-info
                    

        - type: custom:stack-in-card
          mode: vertical
          cards:  
            - type: markdown
              style: |
                   ha-card {
                     color: #f8ffd8;
                     --paper-item-icon-color: #f8ffd8;
                     --paper-item-icon-active-color: #f8ffd8;
                     font-weight: bold;
                     font-size: 14px;
                   } 
              content: >
                 **Датчики и сенсоры**

            - type: horizontal-stack
              cards:

              - type: custom:mushroom-template-card
                primary: Стиралка
                secondary: |-
                  {% if is_state("binary_sensor.0x00158d0002705b7b_water_leak", "off") %}
                  Сухо
                  {% else %}
                  Обнаружена протечка
                  {% endif %}
                layout: vertical
                entity: binary_sensor.0x00158d0002705b7b_water_leak
                icon: |-
                  {% if is_state("binary_sensor.0x00158d0002705b7b_water_leak", "off") %}
                  mdi:water-check
                  {% else %}
                  mdi:water-alert
                  {% endif %}
                multiline_secondary: true
                icon_color: |-
                  {% if is_state("binary_sensor.0x00158d0002705b7b_water_leak", "off") %}
                  green
                  {% else %}
                  red
                  {% endif %} 
                tap_action:
                  action: more-info
                 
              - type: custom:mushroom-template-card
                primary: Движение
                secondary: |-
                  {% if is_state("binary_sensor.0x00158d0001e16204_occupancy", "off") %}
                  Не обнаружено
                  {% else %}
                  Движение
                  {% endif %}
                layout: vertical
                entity: binary_sensor.0x00158d0001e16204_occupancy
                icon: |-
                  {% if is_state("binary_sensor.0x00158d0001e16204_occupancy", "off") %}
                  mdi:motion-sensor-off
                  {% else %}
                  mdi:motion-sensor
                  {% endif %}
                multiline_secondary: true
                icon_color: |-
                  {% if is_state("binary_sensor.0x00158d0001e16204_occupancy", "off") %}
                  grey
                  {% else %}
                  amber
                  {% endif %} 
                tap_action:
                  action: more-info

              - type: custom:mushroom-template-card
                primary: Температура
                secondary: |-
                      {{states ('sensor.0xec1bbdfffe8d6ac9_temperature')}} С°
                layout: vertical
                entity: sensor.0xec1bbdfffe8d6ac9_temperature
                icon_color: |-
                  {% if states("sensor.0xec1bbdfffe8d6ac9_temperature")|float <= -10 %}
                  indigo
                  {% elif states("sensor.0xec1bbdfffe8d6ac9_temperature")|float <= 0 %}
                  blue
                  {% elif states("sensor.0xec1bbdfffe8d6ac9_temperature")|float <= 10 %}
                  light-blue
                  {% elif states("sensor.0xec1bbdfffe8d6ac9_temperature")|float <= 20 %}
                  cyan
                  {% elif states("sensor.0xec1bbdfffe8d6ac9_temperature")|float <= 25 %}
                  yellow
                  {% elif states("sensor.0xec1bbdfffe8d6ac9_temperature")|float <= 30 %}
                  amber
                  {% elif states("sensor.0xec1bbdfffe8d6ac9_temperature")|float <= 40 %}
                  orange
                  {% endif %}
                icon: mdi:temperature-celsius
                tap_action:
                  action: more-info

              - type: custom:mushroom-template-card
                primary: Влажность
                secondary: |-
                      {{states ('sensor.0xec1bbdfffe8d6ac9_humidity')}} %
                layout: vertical
                entity: sensor.0xec1bbdfffe8d6ac9_humidity
                icon_color: |-
                  {% if states("sensor.0xec1bbdfffe8d6ac9_humidity")|float <= 30 %}
                  deep-orange
                  {% elif states("sensor.0xec1bbdfffe8d6ac9_humidity")|float <= 40 %}
                  yellow
                  {% elif states("sensor.0xec1bbdfffe8d6ac9_temperature")|float <= 50 %}
                  light-blue
                  {% elif states("sensor.0xec1bbdfffe8d6ac9_temperature")|float <= 60 %}
                  blue
                  {% elif states("sensor.0xec1bbdfffe8d6ac9_temperature")|float > 60 %}
                  indigo
                  {% endif %}
                icon: mdi:water-percent
                tap_action:
                  action: more-info 

############################ Колонка 3 ############################

    - type: vertical-stack
      cards:
      
        - type: markdown
          style: |
              ha-card {
                color: #f8ffd8;
                --paper-item-icon-color: #f8ffd8;
                --paper-item-icon-active-color: #f8ffd8;
                font-weight: bold;
                font-size: 26px;
              }          
          content: >
             **Телеметрия**
             
        - type: custom:stack-in-card
          mode: vertical
          cards:  
            - type: markdown
              style: |
                   ha-card {
                     color: #f8ffd8;
                     --paper-item-icon-color: #f8ffd8;
                     --paper-item-icon-active-color: #f8ffd8;
                     font-weight: bold;
                     font-size: 14px;
                   } 
              content: >
                 **Состояние датчиков туалет**

            - type: entities
              style: |
                   ha-card {
                     color: #f8ffd8;
                     --paper-item-icon-color: #f8ffd8;
                     --paper-item-icon-active-color: #f8ffd8;
                     font-weight: bold;
                     font-size: 14px;
                   } 
              show_header_toggle: false
              entities:
                - type: divider
                - entity: sensor.0x00158d0001bbeba6_battery
                  type: custom:multiple-entity-row
                  icon: mdi:water
                  state_color: true
                  name: Протечка
                  secondary_info: last-changed
                  state_header: Батарейка
                  entities:
                  - attribute: linkquality
                    name: Сигнал                 
                - type: divider
                - entity: sensor.0x00158d0001a24e71_battery
                  type: custom:multiple-entity-row
                  icon: mdi:run
                  state_color: true
                  name: Датчик движения
                  secondary_info: last-changed
                  state_header: Батарейка
                  entities:
                  - attribute: linkquality
                    name: Сигнал                 
                - type: divider
                - entity: sensor.0xec1bbdfffe6f3394_battery
                  type: custom:multiple-entity-row
                  icon: mdi:coolant-temperature
                  state_color: true
                  name: Датчик климата
                  secondary_info: last-changed
                  state_header: Батарейка
                  entities:
                  - attribute: linkquality
                    name: Сигнал 
                - type: divider
                - entity: sensor.0x54ef441000279090_battery
                  type: custom:multiple-entity-row
                  icon: mdi:light-switch
                  state_color: true
                  name: Беспроводный выключатель
                  secondary_info: last-changed
                  state_header: Батарейка
                  entities:
                  - attribute: linkquality
                    name: Сигнал

        - type: custom:stack-in-card
          mode: vertical
          cards:  
            - type: markdown
              style: |
                   ha-card {
                     color: #f8ffd8;
                     --paper-item-icon-color: #f8ffd8;
                     --paper-item-icon-active-color: #f8ffd8;
                     font-weight: bold;
                     font-size: 14px;
                   } 
              content: >
                 **Состояние датчиков прачечная**

            - type: entities
              style: |
                   ha-card {
                     color: #f8ffd8;
                     --paper-item-icon-color: #f8ffd8;
                     --paper-item-icon-active-color: #f8ffd8;
                     font-weight: bold;
                     font-size: 14px;
                   } 
              show_header_toggle: false
              entities:
                - type: divider
                - entity: sensor.0x00158d0002705b7b_battery
                  type: custom:multiple-entity-row
                  icon: mdi:water
                  state_color: true
                  name: Протечка
                  secondary_info: last-changed
                  state_header: Батарейка
                  entities:
                  - attribute: linkquality
                    name: Сигнал
                - type: divider
                - entity: sensor.0x00158d0001e16204_battery
                  type: custom:multiple-entity-row
                  icon: mdi:run
                  state_color: true
                  name: Датчик движения
                  secondary_info: last-changed
                  state_header: Батарейка
                  entities:
                  - attribute: linkquality
                    name: Сигнал
                - type: divider
                - entity: sensor.0xec1bbdfffe8d6ac9_battery
                  type: custom:multiple-entity-row
                  icon: mdi:coolant-temperature
                  state_color: true
                  name: Датчик климата
                  secondary_info: last-changed
                  state_header: Батарейка
                  entities:
                  - attribute: linkquality
                    name: Сигнал 

